<!DOCTYPE HTML>
<html>
<head>
<title>1. 实现伸缩二级菜单</title>
<meta charset="utf-8" />
<link rel="stylesheet" href="css/1.css" />

</head>
<body>
	<ul class="tree">
		<li>
			<span class="open">考勤管理</span>
			<ul>
				<li>日常考勤</li>
				<li>请假申请</li>
				<li>加班/出差</li>
				<li>辞职</li>
			</ul>
		</li>
		<li><span>信息中心</span>
			<ul>
				<li>通知公告</li>
				<li>公司新闻</li>
				<li>规章制度</li>
			</ul>
		</li>
		<li><span>协同办公</span>
			<ul>
				<li>公文流转</li>
				<li>文件中心</li>
				<li>内部邮件</li>
				<li>即时通信</li>
				<li>短信提醒</li>
			</ul>
		</li>
	</ul>
  <script>
		//DOM4步：
		//1.查找触发事件的处理函数
		//本例中：查找ul.tree下的li下的span元素
		var spans=document.querySelectorAll("ul.tree>li>span");
		//2.绑定事件处理函数
		//本例中，每个span都要绑定事件处理函数
		//遍历每个span
		for(var span of spans){
			span.onclick=function(){
				//获得当前点击的元素,用this
				//this.innerHTML="❀";
				//3.查找要修改的元素
				//本例中：要修改的元素为当前点击的span元素的class属性即可
				//4.修改元素
				//本例中：
				//如果当前span元素是开着的，则只需要关闭当前元素本身即可，（就是为当前元素添加open类）
				if(this.className=="open"){
					this.className=""
				}else{  //否则如果当前元素是关着的，就需要找到ul.tree下的li下的span元素有open属性的
					var openSpan=document.querySelector("ul.tree>li>span.open");
					if(openSpan!==null){  //如果找到了span元素有open属性的，也就是该元素是打开的
						openSpan.className="";	//才关闭该元素（去掉该元素的open属性）
					}
					this.className="open";   //最后在打开当前的span元素(添加open属性)
				}
			}
		}		
	</script>
</body>
</html>
